<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technical Object Analysis - Print Ready</title>
    
    <!-- Tailwind CSS (CDN) -->
    <link href="../assets/css/styles.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Ajustes para los textareas en pantalla */
        textarea {
            resize: none; 
            overflow: hidden; 
            min-height: 80px;
            transition: height 0.2s;
        }

        /* --- LÓGICA DE IMPRESIÓN (Ctrl+P / Botón) --- */
        
        /* Por defecto, los divs de solo lectura están ocultos */
        .pdf-view-only {
            display: none;
        }

        /* REGLAS EXCLUSIVAS PARA IMPRESORA / PDF */
        @media print {
            /* 1. Configuración de página */
            @page {
                margin: 10mm;
                size: A4;
            }
            
            body { 
                -webkit-print-color-adjust: exact; 
                print-color-adjust: exact; 
                background-color: white !important;
            }

            /* 2. Ocultar interfaz y campos editables */
            #download-btn-container, 
            .no-print, 
            .input-field, 
            #instructions-box { 
                display: none !important; 
            }

            /* 3. Mostrar el contenido como texto limpio */
            .pdf-view-only {
                display: block !important;
                white-space: pre-wrap; /* Respeta los saltos de línea */
                font-family: ui-sans-serif, system-ui, sans-serif;
                color: #1f2937;
                background-color: #f9fafb;
                padding: 0.5rem;
                border-radius: 0.375rem;
                border: 1px solid #e5e7eb;
                width: 100%;
                font-size: 0.85rem;
                line-height: 1.4;
            }

            /* 4. Ajustes del contenedor para aprovechar el papel */
            #document-content { 
                box-shadow: none !important; 
                border: none !important; 
                width: 100% !important; 
                max-width: none !important;
                margin: 0 !important;
                border-radius: 0 !important;
            }

            /* 5. Evitar cortes feos de página dentro de las secciones */
            section, .grid {
                break-inside: avoid;
            }
            
            /* Mostrar footer solo al imprimir */
            #pdf-footer {
                display: block !important;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen py-10 font-sans text-gray-800">

    <!-- Botón Flotante (Ahora simplemente llama a imprimir) -->
    <div id="download-btn-container" class="fixed bottom-8 right-8 z-50">
        <button onclick="window.print()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-full shadow-lg transform transition hover:-translate-y-1 flex items-center gap-3 border-2 border-white cursor-pointer group">
            <i class="fa-solid fa-print text-2xl group-hover:scale-110 transition-transform"></i>
            <span>Save as PDF</span>
        </button>
    </div>

    <!-- Contenedor Principal -->
    <div id="document-content" class="max-w-4xl mx-auto bg-white shadow-xl rounded-xl overflow-hidden border border-gray-200 relative">
        
        <!-- Header -->
        <div class="bg-indigo-900 text-white p-8 border-b-4 border-cyan-400">
            <div class="flex justify-between items-start">
                <div>
                    <h1 class="text-3xl font-bold uppercase tracking-wider">Technical Object Analysis</h1>
                    <p class="text-indigo-200 mt-2 text-lg">Automated Scale Model | Unit 1: The Technological Process</p>
                </div>
                <div class="text-right hidden sm:block">
                    <span class="bg-indigo-800 text-xs px-3 py-1 rounded uppercase tracking-widest">3º ESO</span>
                </div>
            </div>
        </div>

        <!-- Content Form -->
        <div class="p-8 space-y-8">
            <!-- Instructions -->
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 no-print" id="instructions-box">
                <p class="text-sm text-blue-800">
                    <strong>Instructions:</strong> Complete this detailed analysis in <strong>English</strong>. The information you provide here will be used later in the project. Be precise, technical, and descriptive to get the best result.
                </p>
            </div>

            <!-- DATOS DEL ALUMNO -->
            <div class="bg-indigo-50 p-6 rounded-lg border border-indigo-100">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="block text-xs font-bold text-indigo-800 uppercase mb-2"><i class="fa-solid fa-user mr-1"></i> Student Name</label>
                        <input type="text" placeholder="Your Name" class="w-full bg-white border border-indigo-200 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 font-medium input-field">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-indigo-800 uppercase mb-2"><i class="fa-solid fa-users mr-1"></i> Group</label>
                        <input type="text" placeholder="e.g., 3ºA - Group 1" class="w-full bg-white border border-indigo-200 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 font-medium input-field">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-indigo-800 uppercase mb-2"><i class="fa-solid fa-tag mr-1"></i> Project Title</label>
                        <input type="text" placeholder="e.g., Eco-Smart Home" class="w-full bg-white border border-indigo-200 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 font-medium input-field">
                    </div>
                </div>
            </div>

            <!-- SECCIÓN 0 -->
            <section>
                <div class="flex items-center gap-3 mb-4 border-b pb-2 border-gray-200">
                    <span class="bg-indigo-100 text-indigo-700 font-bold py-1 px-3 rounded text-sm">00</span>
                    <h2 class="text-xl font-bold text-gray-800 uppercase">General Project Description</h2>
                </div>
                <p class="text-sm text-gray-500 italic mb-4 no-print">Briefly describe your project in 2-3 sentences. What is it and what problem does it solve?</p>
                <div>
                    <textarea oninput="autoResize(this)" placeholder="e.g., This project is a scale model of a bioclimatic house..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                </div>
            </section>

            <!-- SECCIÓN 1 -->
            <section>
                <div class="flex items-center gap-3 mb-4 border-b pb-2 border-gray-200">
                    <span class="bg-indigo-100 text-indigo-700 font-bold py-1 px-3 rounded text-sm">01</span>
                    <h2 class="text-xl font-bold text-gray-800 uppercase">Formal Analysis (Shape & Structure)</h2>
                </div>
                <p class="text-sm text-gray-500 italic mb-6 no-print">Focus on the geometry, physical dimensions, and structural assembly.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Overall Geometry</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Rectangular prism..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Dimensions (mm)</label>
                        <textarea oninput="autoResize(this)" placeholder="Height: ___mm, Width: ___mm..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Assembly Method</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Hot glue..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Scale Ratio</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., 1:20" class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                </div>
            </section>

            <!-- SECCIÓN 2 -->
            <section>
                <div class="flex items-center gap-3 mb-4 border-b pb-2 border-gray-200">
                    <span class="bg-indigo-100 text-indigo-700 font-bold py-1 px-3 rounded text-sm">02</span>
                    <h2 class="text-xl font-bold text-gray-800 uppercase">Technical Analysis (Materials)</h2>
                </div>
                <p class="text-sm text-gray-500 italic mb-6 no-print">Analyze the materials used, surface finishes, and the technical principles applied.</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Structural Materials</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Plywood, cardboard..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Surface Finishes</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Acrylic paint..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Technical Principles</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Electric circuit..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Standardized Parts</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., M3 screws..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                </div>
            </section>

            <!-- SECCIÓN 3 -->
            <section>
                <div class="flex items-center gap-3 mb-4 border-b pb-2 border-gray-200">
                    <span class="bg-indigo-100 text-indigo-700 font-bold py-1 px-3 rounded text-sm">03</span>
                    <h2 class="text-xl font-bold text-gray-800 uppercase">Functional Analysis</h2>
                </div>
                <p class="text-sm text-gray-500 italic mb-6 no-print">Define the primary utility, how the mechanism moves, and the control system logic.</p>
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Main Function</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Smart home prototype" class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Moving Mechanism</label>
                        <textarea oninput="autoResize(this)" placeholder="Describe the mechanism..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Control System</label>
                            <textarea oninput="autoResize(this)" placeholder="e.g., Arduino Uno..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Operational Workflow</label>
                            <textarea oninput="autoResize(this)" placeholder="e.g., When sensor detects..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECCIÓN 4 -->
            <section>
                <div class="flex items-center gap-3 mb-4 border-b pb-2 border-gray-200">
                    <span class="bg-indigo-100 text-indigo-700 font-bold py-1 px-3 rounded text-sm">04</span>
                    <h2 class="text-xl font-bold text-gray-800 uppercase">Aesthetic Analysis</h2>
                </div>
                <p class="text-sm text-gray-500 italic mb-6 no-print">Describe the visual style, color palette, and the sensations the object conveys.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Architectural Style</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Industrial Loft" class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Color Palette</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Gray, oak, cyan" class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Atmosphere</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Warm lighting..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Ergonomics</label>
                        <textarea oninput="autoResize(this)" placeholder="e.g., Removable roof..." class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 input-field"></textarea>
                    </div>
                </div>
            </section>

             <!-- SECCIÓN 5 -->
             <section>
                <div class="flex items-center gap-3 mb-4 border-b pb-2 border-gray-200">
                    <span class="bg-indigo-100 text-indigo-700 font-bold py-1 px-3 rounded text-sm">05</span>
                    <h2 class="text-xl font-bold text-gray-800 uppercase">Socio-Economic Analysis</h2>
                </div>
                <p class="text-sm text-gray-500 italic mb-6 no-print">Evaluate the environmental impact, cost estimation, and the concept behind the project.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Concept</label>
                        <textarea oninput="autoResize(this)" class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 h-24 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Environmental Impact</label>
                        <textarea oninput="autoResize(this)" class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 h-24 input-field"></textarea>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Estimated Cost</label>
                        <textarea oninput="autoResize(this)" class="w-full bg-gray-50 border border-gray-300 rounded p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 h-24 input-field"></textarea>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- Footer for PDF only -->
        <div id="pdf-footer" class="bg-indigo-900 text-white p-4 text-center text-xs hidden">
            Technology and Digitalisation 3º ESO | Technical Analysis Report
        </div>
    </div>

    <script>
        // Función para auto-ajustar textareas
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        // LÓGICA DE SINCRONIZACIÓN DE IMPRESIÓN
        // Esto se ejecuta AUTOMÁTICAMENTE antes de imprimir (ya sea por botón o Ctrl+P)
        window.addEventListener('beforeprint', () => {
            const inputs = document.querySelectorAll('input.input-field, textarea.input-field');
            
            inputs.forEach(input => {
                // 1. Buscamos si ya existe el "espejo" de texto
                let div = input.nextElementSibling;
                
                // 2. Si no es el espejo correcto, lo creamos
                if (!div || !div.classList.contains('pdf-view-only')) {
                    div = document.createElement('div');
                    div.className = 'pdf-view-only';
                    if(input.parentNode) input.parentNode.insertBefore(div, input.nextSibling);
                }
                
                // 3. Copiamos el valor actual
                div.textContent = input.value || ' '; 
            });
        });
    </script>
</body>
</html>